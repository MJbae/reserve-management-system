# point-management-system

## Table of Contents
- [I. 실행 방법](#i-실행-방법)
- [II. TDD 기반 API 구현](#ii-tdd-기반-api-구현)
- [III. 프로젝트 구조](#iii-프로젝트-구조)
- [IV. 기능별 순서도](#iv-기능별-순서도)

---

### I. 실행 방법
프로젝트 루트에서 아래 명령어들을 차례대로 실행해주세요.
```shell
./gradlew build
```
```shell
docker-compose up
```

### II. TDD 기반 API 구현
1. 기능을 직관적으로 이해하기 위해 순서도를 작성합니다.
2. 가장 간단한 방법으로 기능을 구현합니다.
3. 순서도의 주요 분기에 대해 실패하는 테스트를 작성합니다.
4. 실패하는 테스트를 통과하도록 코드를 수정합니다.
5. 3단계, 4단계 반복하며 여러 시나리오에 대응하도록 기능의 완성도를 높입니다.

### III. 프로젝트 구조
본 프로젝트는 4개의 주요 패키지로 구성되어 있습니다.
- **domain**: 핵심 비지니스 로직과 상태를 모델링합니다.
- **usecase**: 도메인 모델을 조합하여 비지니스 단위 기능을 구현합니다.
- **infra**: 도메인과 결합할 필요가 없는 내부 시스템의 기능을 구현합니다.
- **controller**: 외부 시스템과의 인터페이스를 정의합니다.

### IV. 기능별 순서도
1. 회원별 적립금 합계 조회

    ```mermaid
    graph TB
    시작(시작) --> 회원존재여부[회원 존재 ?]
    회원존재여부 -->|예| 적립금보기[회원의 적립금 합계 응답]
    회원존재여부 -->|아니오| 회원미존재예외[회원 미존재 응답]
    ```

2. 회원별 적립금 적립

    ```mermaid
    graph TB
    시작(시작) --> 회원존재여부[회원 존재 ?]
    회원존재여부 -->|예| 적립금확인[적립 대상 금액 유효 ?]
    회원존재여부 -->|아니오| 회원미존재예외[회원 미존재 응답]
    적립금확인 -->|예| 적립금추가[적립금 추가]
    적립금확인 -->|아니오| 유효하지않은금액[대상 금액 무효 응답]
    적립금추가 --> 성공메세지[적립 성공 응답]
    ```

3. 회원별 적립금 적립/사용 내역 조회

    ```mermaid
    graph TB
    시작(시작) --> 회원존재여부[회원 존재 ?]
    회원존재여부 -->|예| 거래내역확인[회원 적립금 내역 존재 ?]
    회원존재여부 -->|아니오| 회원미존재예외[회원 미존재 응답]
    거래내역확인 -->|예| 거래목록보기[적립/사용 내역 응답]
    거래내역확인 -->|아니오| 거래내역없음[빈 내역 응답]
    ```

4. 회원별 적립금 사용

    ```mermaid
    graph TB
    시작(시작) --> 회원존재여부[회원 존재 ?]
    회원존재여부 -->|예| 적립금충분확인[적립금 충분 ?]
    회원존재여부 -->|아니오| 회원미존재예외[회원 미존재 응답]
    적립금충분확인 -->|예| 적립금사용[적립금 사용]
    적립금충분확인 -->|아니오| 적립금부족[적립금 부족 응답]
    적립금사용 --> 적립금차감응답[적립금 사용 성공 응답]
    ```

5. 회원별 적립금 사용취소

    ```mermaid
    graph TB
    시작(시작) --> 회원존재여부[회원 존재 ?]
    회원존재여부 -->|예| 거래존재확인[거래 존재 ?]
    회원존재여부 -->|아니오| 회원미존재예외[회원 미존재 응답]
    거래존재확인 -->|예| 거래취소가능여부[적립금 사용취소 가능 ?]
    거래존재확인 -->|아니오| 거래존재안함[거래 미존재 응답]
    거래취소가능여부 -->|예| 거래취소가능[거래 취소]
    거래취소가능여부 -->|아니오| 거래취소불가[거래 취소 불가 응답]
    거래취소가능 --> 거래취소성공응답[거래 취소 성공 응답]
    ```